# API Specification: Notification Concept

**Purpose:** To create and send templated email notifications to users.

---

## API Endpoints

### POST /api/Notification/createMessageBody

**Description:** Creates a formatted message object from a template and recipient information, ready to be sent.

**Requirements:**
- A `template` string must be provided.
- A recipient `email` string must be provided.
- A recipient `name` string must be provided.
- The provided `email` must be a valid email address format.
- The domain of the `email` must be on the allowed list (e.g., `mit.edu` by default, or as configured by the `NOTIFICATION_ALLOWED_DOMAINS` environment variable).

**Effects:**
- Returns a `Message` object.
- The message `body` is generated by replacing `{{name}}` and `{{email}}` placeholders in the provided `template`.
- The message `from` address is set based on server configuration.
- The message `subject` is set to "Notification for {name}".

**Request Body:**
```json
{
  "template": "string",
  "email": "string",
  "name": "string"
}
```

**Success Response Body (Action):**
```json
{
  "from": "string",
  "to": "string",
  "subject": "string",
  "body": "string",
  "html": "boolean"
}
```

**Error Response Body:**
```json
{
  "error": "string"
}
```
---
### POST /api/Notification/sendEmail

**Description:** Sends a pre-formatted email message to a recipient.

**Requirements:**
- A `message` object must be provided.
- The `message` object must contain a `to` field with a valid email address.

**Effects:**
- Dispatches the email to the recipient specified in the `to` field of the message object.
- Returns an empty object on successful dispatch.

**Request Body:**
```json
{
  "message": {
    "from": "string",
    "to": "string",
    "subject": "string",
    "body": "string",
    "html": "boolean"
  }
}
```

**Success Response Body (Action):**
```json
{}
```

**Error Response Body:**
```json
{
  "error": "string"
}
```
---
